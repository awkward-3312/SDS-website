<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SDS | Productos</title>
  <meta name="description" content="Cat√°logo de productos personalizados. Busca, filtra y a√±ade al carrito." />

  <!-- Estilos -->
  <link rel="stylesheet" href="style.css">

  <!-- Preload (si tienes una imagen hero est√°tica) -->
  <!-- <link rel="preload" as="image" href="../images/hero-products.jpg"> -->
</head>
<body>

  <!-- Skip link para usuarios de teclado/lectores -->
  <a class="skip-link" href="#main" style="position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden;">
    Ir al contenido
  </a>

  <!-- NAVBAR -->
  <nav class="navbar" id="navbar" role="navigation" aria-label="Navegaci√≥n principal">
    <a class="brand" href="../index.html">
      <img src="../images/sds-logo.png" alt="Soluciones Digitales Seguras (SDS)" class="logo">
    </a>

    <!-- Bot√≥n hamburger para mobile (controlado por tu JS) -->
    <button id="navToggle" class="nav-toggle" aria-label="Abrir men√∫" aria-expanded="false" aria-controls="mainMenu">
      <span class="hamb" aria-hidden="true"></span>
    </button>

    <ul id="mainMenu" class="menu" role="menubar">
      <li role="none"><a role="menuitem" href="../index.html">Inicio</a></li>
      <li role="none"><a role="menuitem" href="../services/services.html">Servicios</a></li>
      <li role="none"><a role="menuitem" href="#" aria-current="page">Productos</a></li>
      <li role="none"><a role="menuitem" href="../contact/contact.html">Contacto</a></li>
    </ul>
  </nav>

  <!-- MAIN -->
  <main id="main" tabindex="-1">

    <!-- HERO -->
    <header class="products-hero" role="region" aria-label="Encabezado de productos">
      <h1>Productos Disponibles</h1>
      <p>Productos personalizados a tu gusto para tu hogar o negocio.</p>
    </header>

    <!-- CONTROLES: b√∫squeda, categor√≠a, stock y orden -->
    <section class="products-controls" aria-label="Controles de b√∫squeda y filtro">
      <div class="control-row">
        <label for="searchInput" class="visually-hidden">Buscar producto</label>
        <input id="searchInput" type="search" placeholder="Buscar producto..." aria-controls="products-list" />

        <label for="categoryFilter" class="visually-hidden">Filtrar por categor√≠a</label>
        <select id="categoryFilter" aria-controls="products-list">
          <option value="">Todas las categor√≠as</option>
          <!-- Opcional: puedes llenar din√°micamente -->
        </select>

        <label for="stockFilter" class="visually-hidden">Filtrar por stock</label>
        <select id="stockFilter" aria-controls="products-list">
          <option value="all">Todos</option>
          <option value="instock">Solo en stock</option>
          <option value="low">Stock bajo (&lt;5)</option>
          <option value="out">Agotados</option>
        </select>

        <label for="sortSelect" class="visually-hidden">Ordenar</label>
        <select id="sortSelect" aria-controls="products-list">
          <option value="relevance">M√°s relevantes</option>
          <option value="price_asc">Precio ‚Üë</option>
          <option value="price_desc">Precio ‚Üì</option>
          <option value="title_asc">Nombre A-Z</option>
        </select>
      </div>
    </section>

    <!-- CONTADOR Y CHIPS DE CATEGOR√çA -->
    <section aria-label="Resumen de resultados" class="results-summary" style="max-width:var(--max-width-controls); margin: 0 auto;">
      <p id="productCount" class="product-count" aria-live="polite"></p>
      <div id="categoryChips" class="category-chips" role="toolbar" aria-label="Filtrar por categor√≠a">
        <!-- chips din√°micos aqu√≠ -->
      </div>
    </section>

    <!-- AREA PRODUCTOS: lista sem√°ntica -->
    <section id="catalogo" aria-label="Cat√°logo de productos">
      <!-- products-list act√∫a como listado para screen readers -->
      <ul id="products-list" class="products-grid" role="list">
        <!-- Los elementos de producto se generar√°n din√°micamente como <li role="listitem"> -->
      </ul>
    </section>

    <!-- Plantilla de tarjeta de producto (para clonar desde JS) -->
    <template id="productCardTemplate">
      <li class="product-card" role="listitem">
        <article class="card" data-product-id="" data-category="" data-has-sizes="false" tabindex="0">
          <div class="card-media">
            <img class="card-img" src="" alt="" width="400" height="320" loading="lazy">
          </div>
          <div class="card-body">
            <h3 class="card-title"></h3>
            <p class="card-excerpt"></p>
            <div class="card-meta">
              <div class="card-price" aria-hidden="true"></div>
              <div class="card-stock" aria-live="polite"></div>
            </div>
            <div class="card-actions">
              <button class="btn btn-ghost view-details" type="button" aria-haspopup="dialog" aria-controls="productModal">Ver detalles</button>
              <button class="btn btn-primary quick-add" type="button">Agregar</button>
            </div>
          </div>
        </article>
      </li>
    </template>

  </main>

  <!-- MODAL DETALLES (mejorado y accesible) -->
  <!-- Usamos un dialog-role con backdrop. aria-hidden="true" por defecto -->
  <div id="productModal" class="modal" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="modalTitle">
    <div class="modal-backdrop" id="modalBackdrop" data-close="true"></div>

    <div class="modal-window" role="document">
      <button class="modal-close" id="modalCloseBtn" aria-label="Cerrar">√ó</button>

      <div class="modal-content" role="group" aria-label="Detalle del producto">

        <!-- IZQUIERDA: MEDIA -->
        <aside class="modal-left" aria-label="Im√°genes del producto">
          <div class="media-inner">
            <img id="modalImg" src="" alt="" width="560" height="560" loading="eager">
          </div>

          <!-- THUMBS (opcional) -->
          <div id="modalThumbs" class="modal-thumbs" aria-hidden="true"></div>

          <!-- acciones r√°pidas -->
          <div class="media-actions">
            <button class="icon-btn" id="favBtn" aria-label="Agregar a favoritos">‚ô°</button>
            <button class="icon-btn" id="giftBtn" aria-label="Marcar como regalo">üéÅ</button>
          </div>
        </aside>

        <!-- DERECHA: INFO -->
        <main class="modal-info" id="modalInfo">
          <p class="product-brand" id="modalBrand" aria-hidden="true"></p>
          <h2 id="modalTitle"></h2>
          <p id="modalDesc" class="product-desc"></p>

          <div class="price-row">
            <div id="modalPrice" class="price" aria-live="polite"></div>
            <div id="modalStock" class="stock" aria-live="polite"></div>
          </div>

          <!-- VARIANTES: controladas desde JS -->
          <div id="modalVariants" class="product-options" aria-controls="modalInfo">
            <!-- Ejemplo de control condicional: label con id label-talla -> hidden si no aplica -->
            <label id="label-talla" class="option-row" for="select-talla" hidden>
              Talla
              <select id="select-talla" name="size"></select>
            </label>

            <label id="label-color" class="option-row" for="select-color">
              Color
              <select id="select-color" name="color"></select>
            </label>
          </div>

          <!-- CTA + cantidad + ayuda -->
          <div class="actions-row">
            <button id="addToCart" class="btn btn-primary">Agregar al Carrito</button>

            <div class="qty-wishlist" aria-hidden="false">
              <div class="qty" role="group" aria-label="Cantidad">
                <button class="qty-btn" id="qty-dec" type="button" aria-label="Disminuir cantidad">‚àí</button>
                <input id="qty" type="number" value="1" min="1" inputmode="numeric" aria-label="Cantidad a comprar" />
                <button class="qty-btn" id="qty-inc" type="button" aria-label="Aumentar cantidad">+</button>
              </div>

              <button id="helpBtn" class="btn btn-outline" type="button">Solicitar ayuda</button>
            </div>
          </div>

          <p class="microcopy" id="modalShipping">Env√≠o estimado: 3-5 d√≠as h√°biles</p>
        </main>

      </div>
    </div>
  </div>

  <!-- Scripts: supabase + script  -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.28.0/dist/umd/supabase.min.js"></script>
  <script src="../products/script.js"></script>

</body>
</html>